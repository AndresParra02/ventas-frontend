<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora de Comisiones Gamificada</title>
<style>
  body { font-family: Arial, sans-serif; background:#f0f2f5; text-align:center; }
  h1 { color:#333; }
  
  /* Entradas de ventas */
  input[type=number] { width:60px; margin:5px; }

  /* Avatar */
  #avatar {
    width:150px; height:150px;
    margin:20px auto;
    background-size:cover;
    transition: transform 0.5s;
  }

  /* Animaci贸n al subir piso */
  .subio { transform: scale(1.2); }

  /* Barra de progreso gamificada */
  #barraJuego {
    width:80%; height:30px; background:#ddd; margin:20px auto; border-radius:15px; overflow:hidden;
  }
  #progresoJuego {
    height:100%; width:0%; background:linear-gradient(90deg,#4caf50,#00bcd4);
    text-align:right; padding-right:5px; color:white; font-weight:bold;
    border-radius:15px;
    transition: width 0.5s;
  }

  /* Medallas */
  #medallas img { width:50px; margin:5px; vertical-align:middle; }

  /* Mensaje celebraci贸n */
  #mensajeCelebracion { font-size:18px; color:#e91e63; margin-top:10px; }
</style>
</head>
<body>

<h1>Calculadora de Comisiones Gamificada</h1>

<div>
  <label>PORTA (POS a POS):</label>
  <input type="number" id="pos" value="0"><br>
  <label>Migraci贸n:</label>
  <input type="number" id="migracion" value="0"><br>
  <label>Pre:</label>
  <input type="number" id="pre" value="0"><br>
  <label>L铆nea Nueva:</label>
  <input type="number" id="linea" value="0"><br>
  <button onclick="calcular()">Calcular</button>
</div>

<!-- Avatar -->
<div id="avatar" style="background-image:url('avatar1.png');"></div>

<!-- Barra de progreso gamificada -->
<div id="barraJuego"><div id="progresoJuego">0%</div></div>

<!-- Medallas -->
<div id="medallas"></div>

<!-- Mensaje celebraci贸n -->
<div id="mensajeCelebracion"></div>

<script>
function calcular() {

  //  Puntos por tipo de venta
  const puntosPorTipo = { pos: 1000, migracion: 1000, pre: 1000, linea: 1000 };
  const ventas = {
    pos: Number(document.getElementById("pos").value),
    migracion: Number(document.getElementById("migracion").value),
    pre: Number(document.getElementById("pre").value),
    linea: Number(document.getElementById("linea").value)
  };

  // Puntos totales
  let puntosTotales = 0;
  for (let tipo in ventas) puntosTotales += ventas[tipo] * puntosPorTipo[tipo];

  // Pisos
  const pisos = [
    { piso:1, puntos:182004, comision:450000, avatar:'avatar1.png' },
    { piso:2, puntos:188280, comision:600000, avatar:'avatar2.png' },
    { piso:3, puntos:207108, comision:995535, bonoPorta:3000, avatar:'avatar3.png' },
    { piso:4, puntos:238488, comision:1183535, bonoPorta:6000, avatar:'avatar4.png' },
    { piso:5, puntos:263592, comision:1348035, bonoPorta:8500, avatar:'avatar5.png' },
    { piso:6, puntos:294972, comision:1512535, bonoPorta:10000, avatar:'avatar6.png' },
    { piso:7, puntos:320076, comision:1677035, bonoPorta:11500, avatar:'avatar7.png' },
    { piso:8, puntos:351456, comision:1818035, bonoPorta:12000, avatar:'avatar8.png' }
  ];

  let pisoActual = pisos[0];
  let pisoSiguiente = null;

  for (let i=0; i<pisos.length; i++) {
    if (puntosTotales >= pisos[i].puntos) {
      pisoActual = pisos[i];
      pisoSiguiente = pisos[i+1] || null;
    }
  }

  // Actualizar avatar
  const avatarDiv = document.getElementById("avatar");
  avatarDiv.style.backgroundImage = `url('${pisoActual.avatar}')`;
  avatarDiv.classList.add('subio');
  setTimeout(()=>avatarDiv.classList.remove('subio'),500);

  // Barra de progreso
  let progreso = 0;
  if (pisoSiguiente) {
    progreso = Math.min(((puntosTotales - pisoActual.puntos)/(pisoSiguiente.puntos - pisoActual.puntos))*100,100);
  } else progreso = 100;

  const barra = document.getElementById("progresoJuego");
  barra.style.width = progreso+'%';
  barra.textContent = Math.round(progreso)+'%';

  // Medallas
  const medallasDiv = document.getElementById("medallas");
  medallasDiv.innerHTML = '';
  for(let i=1;i<=pisoActual.piso;i++){
    medallasDiv.innerHTML += `<img src="medalla.png" alt="Medalla piso ${i}">`;
  }

  // Mensaje celebraci贸n
  const mensaje = document.getElementById("mensajeCelebracion");
  if(progreso===100 && pisoSiguiente===null){
    mensaje.textContent = ' 隆Felicidades! Has alcanzado el piso m谩ximo!';
  } else if(pisoActual.piso>1){
    mensaje.textContent = ` Subiste al piso ${pisoActual.piso}!`;
  } else {
    mensaje.textContent = '';
  }
}
</script>

</body>
</html>
